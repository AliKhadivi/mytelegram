// <auto-generated/>
// ReSharper disable All

namespace MyTelegram.Schema;

///<summary>
/// Full info about a <a href="https://corefork.telegram.org/api/channel#basic-groups">basic group</a>.
/// See <a href="https://corefork.telegram.org/constructor/chatFull" />
///</summary>
[TlObject(0xc9d31138)]
public sealed class TChatFull : MyTelegram.Schema.IChatFull, ILayeredChatFull
{
    public uint ConstructorId => 0xc9d31138;
    ///<summary>
    /// Flags, see <a href="https://corefork.telegram.org/mtproto/TL-combinators#conditional-fields">TL conditional fields</a>
    ///</summary>
    public BitArray Flags { get; set; } = new BitArray(32);

    ///<summary>
    /// Can we change the username of this chat
    /// See <a href="https://corefork.telegram.org/type/true" />
    ///</summary>
    public bool CanSetUsername { get; set; }

    ///<summary>
    /// Whether <a href="https://corefork.telegram.org/api/scheduled-messages">scheduled messages</a> are available
    /// See <a href="https://corefork.telegram.org/type/true" />
    ///</summary>
    public bool HasScheduled { get; set; }

    ///<summary>
    /// Whether the <a href="https://corefork.telegram.org/api/translation">real-time chat translation popup</a> should be hidden.
    /// See <a href="https://corefork.telegram.org/type/true" />
    ///</summary>
    public bool TranslationsDisabled { get; set; }

    ///<summary>
    /// ID of the chat
    ///</summary>
    public long Id { get; set; }

    ///<summary>
    /// About string for this chat
    ///</summary>
    public string About { get; set; }

    ///<summary>
    /// Participant list
    /// See <a href="https://corefork.telegram.org/type/ChatParticipants" />
    ///</summary>
    public MyTelegram.Schema.IChatParticipants Participants { get; set; }

    ///<summary>
    /// Chat photo
    /// See <a href="https://corefork.telegram.org/type/Photo" />
    ///</summary>
    public MyTelegram.Schema.IPhoto? ChatPhoto { get; set; }

    ///<summary>
    /// Notification settings
    /// See <a href="https://corefork.telegram.org/type/PeerNotifySettings" />
    ///</summary>
    public MyTelegram.Schema.IPeerNotifySettings NotifySettings { get; set; }

    ///<summary>
    /// Chat invite
    /// See <a href="https://corefork.telegram.org/type/ExportedChatInvite" />
    ///</summary>
    public MyTelegram.Schema.IExportedChatInvite? ExportedInvite { get; set; }

    ///<summary>
    /// Info about bots that are in this chat
    ///</summary>
    public TVector<MyTelegram.Schema.IBotInfo>? BotInfo { get; set; }

    ///<summary>
    /// Message ID of the last <a href="https://corefork.telegram.org/api/pin">pinned message</a>
    ///</summary>
    public int? PinnedMsgId { get; set; }

    ///<summary>
    /// <a href="https://corefork.telegram.org/api/folders#peer-folders">Peer folder ID, for more info click here</a>
    ///</summary>
    public int? FolderId { get; set; }

    ///<summary>
    /// Group call information
    /// See <a href="https://corefork.telegram.org/type/InputGroupCall" />
    ///</summary>
    public MyTelegram.Schema.IInputGroupCall? Call { get; set; }

    ///<summary>
    /// Time-To-Live of messages sent by the current user to this chat
    ///</summary>
    public int? TtlPeriod { get; set; }

    ///<summary>
    /// When using <a href="https://corefork.telegram.org/method/phone.getGroupCallJoinAs">phone.getGroupCallJoinAs</a> to get a list of peers that can be used to join a group call, this field indicates the peer that should be selected by default.
    /// See <a href="https://corefork.telegram.org/type/Peer" />
    ///</summary>
    public MyTelegram.Schema.IPeer? GroupcallDefaultJoinAs { get; set; }

    ///<summary>
    /// Emoji representing a specific chat theme
    ///</summary>
    public string? ThemeEmoticon { get; set; }

    ///<summary>
    /// Pending <a href="https://corefork.telegram.org/api/invites#join-requests">join requests »</a>
    ///</summary>
    public int? RequestsPending { get; set; }

    ///<summary>
    /// IDs of users who requested to join recently
    ///</summary>
    public TVector<long>? RecentRequesters { get; set; }

    ///<summary>
    /// Allowed <a href="https://corefork.telegram.org/api/reactions">message reactions »</a>
    /// See <a href="https://corefork.telegram.org/type/ChatReactions" />
    ///</summary>
    public MyTelegram.Schema.IChatReactions? AvailableReactions { get; set; }

    public void ComputeFlag()
    {
        if (CanSetUsername) { Flags[7] = true; }
        if (HasScheduled) { Flags[8] = true; }
        if (TranslationsDisabled) { Flags[19] = true; }
        if (ChatPhoto != null) { Flags[2] = true; }
        if (ExportedInvite != null) { Flags[13] = true; }
        if (BotInfo?.Count > 0) { Flags[3] = true; }
        if (/*PinnedMsgId != 0 && */PinnedMsgId.HasValue) { Flags[6] = true; }
        if (/*FolderId != 0 && */FolderId.HasValue) { Flags[11] = true; }
        if (Call != null) { Flags[12] = true; }
        if (/*TtlPeriod != 0 && */TtlPeriod.HasValue) { Flags[14] = true; }
        if (GroupcallDefaultJoinAs != null) { Flags[15] = true; }
        if (ThemeEmoticon != null) { Flags[16] = true; }
        if (/*RequestsPending != 0 && */RequestsPending.HasValue) { Flags[17] = true; }
        if (RecentRequesters?.Count > 0) { Flags[17] = true; }
        if (AvailableReactions != null) { Flags[18] = true; }
    }

    public void Serialize(IBufferWriter<byte> writer)
    {
        ComputeFlag();
        writer.Write(ConstructorId);
        writer.Write(Flags);
        writer.Write(Id);
        writer.Write(About);
        writer.Write(Participants);
        if (Flags[2]) { writer.Write(ChatPhoto); }
        writer.Write(NotifySettings);
        if (Flags[13]) { writer.Write(ExportedInvite); }
        if (Flags[3]) { writer.Write(BotInfo); }
        if (Flags[6]) { writer.Write(PinnedMsgId.Value); }
        if (Flags[11]) { writer.Write(FolderId.Value); }
        if (Flags[12]) { writer.Write(Call); }
        if (Flags[14]) { writer.Write(TtlPeriod.Value); }
        if (Flags[15]) { writer.Write(GroupcallDefaultJoinAs); }
        if (Flags[16]) { writer.Write(ThemeEmoticon); }
        if (Flags[17]) { writer.Write(RequestsPending.Value); }
        if (Flags[17]) { writer.Write(RecentRequesters); }
        if (Flags[18]) { writer.Write(AvailableReactions); }
    }

    public void Deserialize(ref SequenceReader<byte> reader)
    {
        Flags = reader.ReadBitArray();
        if (Flags[7]) { CanSetUsername = true; }
        if (Flags[8]) { HasScheduled = true; }
        if (Flags[19]) { TranslationsDisabled = true; }
        Id = reader.ReadInt64();
        About = reader.ReadString();
        Participants = reader.Read<MyTelegram.Schema.IChatParticipants>();
        if (Flags[2]) { ChatPhoto = reader.Read<MyTelegram.Schema.IPhoto>(); }
        NotifySettings = reader.Read<MyTelegram.Schema.IPeerNotifySettings>();
        if (Flags[13]) { ExportedInvite = reader.Read<MyTelegram.Schema.IExportedChatInvite>(); }
        if (Flags[3]) { BotInfo = reader.Read<TVector<MyTelegram.Schema.IBotInfo>>(); }
        if (Flags[6]) { PinnedMsgId = reader.ReadInt32(); }
        if (Flags[11]) { FolderId = reader.ReadInt32(); }
        if (Flags[12]) { Call = reader.Read<MyTelegram.Schema.IInputGroupCall>(); }
        if (Flags[14]) { TtlPeriod = reader.ReadInt32(); }
        if (Flags[15]) { GroupcallDefaultJoinAs = reader.Read<MyTelegram.Schema.IPeer>(); }
        if (Flags[16]) { ThemeEmoticon = reader.ReadString(); }
        if (Flags[17]) { RequestsPending = reader.ReadInt32(); }
        if (Flags[17]) { RecentRequesters = reader.Read<TVector<long>>(); }
        if (Flags[18]) { AvailableReactions = reader.Read<MyTelegram.Schema.IChatReactions>(); }
    }
}